<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Javascript pour le web</title><link rel=stylesheet href=https://www.bpesquet.fr/reveal.js/dist/reveal.css><link rel=stylesheet href=https://www.bpesquet.fr/reveal.js/dist/theme/white.css></head><body><div class=reveal><div class=slides><section><h1>Javascript pour le web</h1><p><a href=https://ensc.bordeaux-inp.fr>Ecole Nationale Supérieure de Cognitique</a></p><p><a href=https://www.bpesquet.fr>Baptiste Pesquet</a></p></section><section><h2 id=sommaire>Sommaire</h2><ul><li>Le DOM</li><li>Navigation dans le DOM</li><li>Modification de la structure</li><li>Gestion des évènements</li><li>Manipulation des formulaires</li></ul></section><section><h2 id=le-dom>Le DOM</h2></section><section><h3 id=exemple-de-page-web>Exemple de page web</h3><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#fb660a;font-weight:700>html</span>&gt;
  &lt;<span style=color:#fb660a;font-weight:700>head</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>meta</span> <span style=color:#ff0086;font-weight:700>charset</span>=<span style=color:#0086d2>&#34;utf-8&#34;</span> /&gt;
    &lt;<span style=color:#fb660a;font-weight:700>title</span>&gt;My web page&lt;/<span style=color:#fb660a;font-weight:700>title</span>&gt;
  &lt;/<span style=color:#fb660a;font-weight:700>head</span>&gt;

  &lt;<span style=color:#fb660a;font-weight:700>body</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>h1</span>&gt;My web page&lt;/<span style=color:#fb660a;font-weight:700>h1</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;Hello! My name&#39;s Baptiste.&lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;
      I live in the great city of
      &lt;<span style=color:#fb660a;font-weight:700>a</span> <span style=color:#ff0086;font-weight:700>href</span>=<span style=color:#0086d2>&#34;https://en.wikipedia.org/wiki/Bordeaux&#34;</span>&gt;Bordeaux&lt;/<span style=color:#fb660a;font-weight:700>a</span>&gt;.
    &lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;
  &lt;/<span style=color:#fb660a;font-weight:700>body</span>&gt;
&lt;/<span style=color:#fb660a;font-weight:700>html</span>&gt;
</code></pre></div></section><section><h3 id=le-document-object-model-dom>Le Document Object Model (DOM)</h3><p>Description de la structure d&rsquo;une page sous forme d&rsquo;une arborescence de <strong>noeuds</strong>.</p><p><img src=images/chapter13-02.png alt="DOM example"></p></section><section><h3 id=types-de-noeuds>Types de noeuds</h3><ul><li><strong>Eléments</strong> : noeuds structurants pouvant contenir des fils. Correspondent aux balises HTML comme <code>&lt;body></code>, <code>&lt;p></code>, etc.</li><li><strong>Texte</strong> : noeuds contenant uniquement du texte.</li></ul></section><section><h3 id=accès-au-dom-avec-javascript>Accès au DOM avec JavaScript</h3><p>Quand le code JavaScript s&rsquo;exécute dans le contexte d&rsquo;une page web, la variable <code>document</code> permet d&rsquo;accéder à la racine du DOM.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> h = document.head; <span style=color:#080;background-color:#0f140f;font-style:italic>// Accès à l&#39;en-tête de la page
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>const</span> b = document.body; <span style=color:#080;background-color:#0f140f;font-style:italic>// Accès au corps de la page
</span></code></pre></div><p>La propriété <code>nodeType</code> permet de récupérer le type d&rsquo;un noeud.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>if</span> (document.body.nodeType === document.ELEMENT_NODE)
    <span style=color:#080;background-color:#0f140f;font-style:italic>// ...
</span></code></pre></div></section><section><h2 id=navigation-dans-le-dom>Navigation dans le DOM</h2></section><section><h3 id=enfants-et-parent-dun-noeud>Enfants et parent d&rsquo;un noeud</h3><p>La propriété <code>childNodes</code> permet d&rsquo;accéder aux enfants d&rsquo;un noeud du DOM sous la forme d&rsquo;une collection ordonnée.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Affiche les noeuds fils du corps de la page
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.body.childNodes.forEach((node) =&gt; {
  console.log(node);
});
</code></pre></div><p>A l&rsquo;inverse, la propriété <code>parentNode</code> permet de remonter au noeud parent.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.body.childNodes[<span style=color:#0086f7;font-weight:700>1</span>].parentNode; <span style=color:#080;background-color:#0f140f;font-style:italic>// Accès au noeud &lt;body&gt;
</span></code></pre></div></section><section><h3 id=sélection-par-type-de-balise>Sélection par type de balise</h3><p>La méthode <code>getElementsByTagName()</code> renvoie la liste des noeuds correspond à une balise HTML.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Liste des noeuds h2
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>const</span> titleElements = document.getElementsByTagName(<span style=color:#0086d2>&#34;h2&#34;</span>);
</code></pre></div></section><section><h3 id=sélection-par-classe>Sélection par classe</h3><p>La méthode <code>getElementsByClassName()</code> renvoie la liste des noeuds possédant une certaine classe CSS.</p><p>Comme toutes les méthodes de sélection, elle renvoie une liste de noeuds qui doit être convertie en tableau (par exemple avec <code>Array.from()</code>) avant de pouvoir être parcourue.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> existingElements = Array.from(document.getElementsByClassName(<span style=color:#0086d2>&#34;exists&#34;</span>));
existingElements.forEach((element) =&gt; {
  console.log(element);
});
</code></pre></div></section><section><h3 id=sélection-par-identifiant>Sélection par identifiant</h3><p>La méthode <code>getElementById()</code> renvoie le noeud possédant l&rsquo;identifiant CSS spécifié, ou <code>null</code> si aucun noeud n&rsquo;est trouvé.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Affiche le noeud identifié par &#34;new&#34;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>console.log(document.getElementById(<span style=color:#0086d2>&#34;new&#34;</span>));
</code></pre></div></section><section><h3 id=sélection-par-sélecteur-css>Sélection par sélecteur CSS</h3><p>Les méthodes <code>querySelectorAll()</code> et <code>querySelector()</code> permettent de rechercher des éléments en utilisant un <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors>sélecteur CSS</a>. La première renvoie une liste, la seconde le premier noeud résultat.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Tous les noeuds paragraphes
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelectorAll(<span style=color:#0086d2>&#34;p&#34;</span>);

<span style=color:#080;background-color:#0f140f;font-style:italic>// Tous les noeuds paragraphes descendants du noeud identifié par &#34;content&#34;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelectorAll(<span style=color:#0086d2>&#34;#content p&#34;</span>);

<span style=color:#080;background-color:#0f140f;font-style:italic>// Tous les noeuds de classe &#34;exists&#34; fils du noeud identifié par &#34;ancient&#34;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelectorAll(<span style=color:#0086d2>&#34;#ancient &gt; .exists&#34;</span>);

<span style=color:#080;background-color:#0f140f;font-style:italic>// Le premier noeud paragraphe
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelector(<span style=color:#0086d2>&#34;p&#34;</span>);
</code></pre></div></section><section><h3 id=méthodes-de-sélection>Méthodes de sélection</h3><table><thead><tr><th>Noeuds cibles</th><th>Méthode</th></tr></thead><tbody><tr><td>Plusieurs, par balise HTML</td><td><code>getElementsByTagName()</code></td></tr><tr><td>Plusieurs, par classe</td><td><code>getElementsByClassName()</code></td></tr><tr><td>Plusieurs</td><td><code>querySelectorAll()</code></td></tr><tr><td>Un seul, par identifiant</td><td><code>getElementById()</code></td></tr><tr><td>Le premier</td><td><code>querySelector()</code></td></tr></tbody></table></section><section><h3 id=contenu-dun-noeud>Contenu d&rsquo;un noeud</h3><p>La propriété <code>innerHTML</code> renvoie le contenu HTML d&rsquo;un noeud du DOM sous forme d&rsquo;une chaîne de caractères.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;content&#34;</span>).innerHTML;
</code></pre></div><p>La propriété <code>textContent</code> renvoie le contenu textuel d&rsquo;un noeud du DOM (sans les balises HTML) sous forme d&rsquo;une chaîne de caractères.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;content&#34;</span>).textContent;
</code></pre></div></section><section><h3 id=attributs-dun-noeud>Attributs d&rsquo;un noeud</h3><p>Les méthodes <code>getAttribute()</code> et <code>hasAttribute()</code> permettent de consulter les attributs d&rsquo;un noeud du DOM.</p><p>Certains attributs comme <code>id</code>, <code>href</code> ou <code>value</code> peuvent être accédés directement.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.querySelector(<span style=color:#0086d2>&#34;a&#34;</span>).getAttribute(<span style=color:#0086d2>&#34;href&#34;</span>); <span style=color:#080;background-color:#0f140f;font-style:italic>// Cible du premier noeud &lt;a&gt;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelector(<span style=color:#0086d2>&#34;a&#34;</span>).href; <span style=color:#080;background-color:#0f140f;font-style:italic>// Idem
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelector(<span style=color:#0086d2>&#34;ul&#34;</span>).id; <span style=color:#080;background-color:#0f140f;font-style:italic>// Identifiant du premier noeud &lt;a&gt;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>
<span style=color:#fb660a;font-weight:700>if</span> (document.querySelector(<span style=color:#0086d2>&#34;a&#34;</span>).hasAttribute(<span style=color:#0086d2>&#34;target&#34;</span>))
  <span style=color:#080;background-color:#0f140f;font-style:italic>//...
</span></code></pre></div></section><section><h3 id=classes-dun-noeud>Classes d&rsquo;un noeud</h3><p>La propriété <code>classList</code> permet d&rsquo;accéder à la liste des classes CSS d&rsquo;un noeud.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Liste des classes du noeud identifié par &#34;ancient&#34;
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>const</span> classes = document.getElementById(<span style=color:#0086d2>&#34;ancient&#34;</span>).classList
console.log(classes.length); <span style=color:#080;background-color:#0f140f;font-style:italic>// Nombre de classes
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>
<span style=color:#fb660a;font-weight:700>if</span> (document.getElementById(<span style=color:#0086d2>&#34;ancient&#34;</span>).classList.contains(<span style=color:#0086d2>&#34;wonders&#34;</span>))
  <span style=color:#080;background-color:#0f140f;font-style:italic>// ...
</span></code></pre></div></section><section><h2 id=modification-de-la-structure>Modification de la structure</h2></section><section><h3 id=modification-dun-noeud>Modification d&rsquo;un noeud</h3><p>Les propriétés <code>innerHTML</code>, <code>textContent</code> et <code>classList</code> ainsi que la méthode <code>setAttribute()</code> peuvent permettre de mettre à jour un noeud existant.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>/// Suppression du contenu (y compris les éventuels fils)
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>).innerHTML = <span style=color:#0086d2>&#34;&#34;</span>;

<span style=color:#080;background-color:#0f140f;font-style:italic>// Ajout d&#39;une chaîne au texte
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelector(<span style=color:#0086d2>&#34;h3&#34;</span>).textContent += <span style=color:#0086d2>&#34; and sons&#34;</span>;

<span style=color:#fb660a;font-weight:700>const</span> titleElement = document.querySelector(<span style=color:#0086d2>&#34;h3&#34;</span>);
titleElement.classList.remove(<span style=color:#0086d2>&#34;beginning&#34;</span>); <span style=color:#080;background-color:#0f140f;font-style:italic>// Suppression d&#39;une classe
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>titleElement.classList.add(<span style=color:#0086d2>&#34;title&#34;</span>); <span style=color:#080;background-color:#0f140f;font-style:italic>// Ajout d&#39;une classe
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>
<span style=color:#080;background-color:#0f140f;font-style:italic>// Mise à jour de l&#39;identifiant (deux solutions possibles)
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.querySelector(<span style=color:#0086d2>&#34;h3&#34;</span>).setAttribute(<span style=color:#0086d2>&#34;id&#34;</span>, <span style=color:#0086d2>&#34;title&#34;</span>);
document.querySelector(<span style=color:#0086d2>&#34;h3&#34;</span>).id = <span style=color:#0086d2>&#34;title&#34;</span>;
</code></pre></div></section><section><section data-shortcode-section><h3 id=ajout-dun-nouveau-noeud>Ajout d&rsquo;un nouveau noeud</h3><p>Il s&rsquo;effectue en 3 étapes :</p><ol><li>Création du nouveau noeud</li><li>Définition de ses attributs</li><li>Insertion du noeud dans le DOM</li></ol><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> pythonElement = document.createElement(<span style=color:#0086d2>&#34;li&#34;</span>);
pythonElement.id = <span style=color:#0086d2>&#34;python&#34;</span>;
pythonElement.textContent = <span style=color:#0086d2>&#34;Python&#34;</span>;
document.getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>).appendChild(pythonElement);
</code></pre></div></section><section><h3 id=création-du-noeud>Création du noeud</h3><p>La méthode <code>createElement()</code> prend en paramètre un type de balise HTML et renvoie un noeud.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Création d&#39;un noeud élément de liste
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>const</span> pythonElement = document.createElement(<span style=color:#0086d2>&#34;li&#34;</span>);
</code></pre></div></section><section><h3 id=définition-des-attributs-du-noeud>Définition des attributs du noeud</h3><p>Les propriétés permettant de modifier un noeud (<code>textContent</code>, <code>classList</code>, etc) permettent de définir les valeurs des attributs du noeud créé.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>pythonElement.id = <span style=color:#0086d2>&#34;python&#34;</span>;
pythonElement.textContent = <span style=color:#0086d2>&#34;Python&#34;</span>;
</code></pre></div></section><section><h3 id=insertion-du-noeud-dans-le-dom>Insertion du noeud dans le DOM</h3><p>La solution la plus courante est d&rsquo;utiliser la méthode <code>appendChild()</code> sur un noeud existant. Elle ajoute le nouveau noeud à la fin de la liste de ses fils.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>).appendChild(pythonElement);
</code></pre></div><p>On peut également utiliser <code>insertBefore()</code> pour ajouter le nouveau noeud avant un noeud fils spécifié.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document
  .getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>)
  .insertBefore(pythonElement, document.getElementById(<span style=color:#0086d2>&#34;php&#34;</span>));
</code></pre></div></section></section><section><h3 id=remplacement-ou-suppression-dun-noeud>Remplacement ou suppression d&rsquo;un noeud</h3><p>La méthode <code>replaceChild()</code> permet de remplacer un noeud par un autre.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document
  .getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>)
  .replaceChild(pythonElement, document.getElementById(<span style=color:#0086d2>&#34;perl&#34;</span>));
</code></pre></div><p>La méthode <code>removeChild()</code> permet de supprimer un noeud existant.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document
  .getElementById(<span style=color:#0086d2>&#34;languages&#34;</span>)
  .removeChild(document.getElementById(<span style=color:#0086d2>&#34;lisp&#34;</span>));
</code></pre></div></section><section><h3 id=gestion-du-style>Gestion du style</h3><p>La propriété <code>style</code> permet d&rsquo;accéder à l&rsquo;attribut <code>style</code> du noeud, composé de propriétés CSS (<code>color</code>, <code>fontFamily</code>, etc) qu&rsquo;il est possible d&rsquo;exploiter.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> paragraphElement = document.querySelector(<span style=color:#0086d2>&#34;p&#34;</span>);
paragraphElement.style.color = <span style=color:#0086d2>&#34;red&#34;</span>;
paragraphElement.style.fontFamily = <span style=color:#0086d2>&#34;Arial&#34;</span>;
paragraphElement.style.backgroundColor = <span style=color:#0086d2>&#34;black&#34;</span>;
</code></pre></div><p>En cas d&rsquo;utilisation d&rsquo;une feuile de style CSS, il faut utiliser la fonction <code>getComputedStyle()</code> pour accéder à l&rsquo;intégralité des styles d&rsquo;un noeud.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> paragraphStyle = getComputedStyle(document.getElementById(<span style=color:#0086d2>&#34;para&#34;</span>));
console.log(paragraphStyle.fontStyle);
console.log(paragraphStyle.color);
</code></pre></div></section><section><h2 id=gestion-des-évènements>Gestion des évènements</h2></section><section><h3 id=principe-de-fonctionnement>Principe de fonctionnement</h3><p>Un <strong>gestionnaire d&rsquo;évènement</strong> est une fonction JavaScript qui va d&rsquo;exécuter lorsqu&rsquo;un évènement apparaît : clic sur un bouton, soumission d&rsquo;un formulaire, survol d&rsquo;une zone avec la souris, etc.</p><p>L&rsquo;ajout de gestionnaires d&rsquo;évènement va améliorer l&rsquo;interactivité de la page web.</p><p>Cette manière d&rsquo;écrire du code est appelée <strong>programmation évènementielle</strong> : l&rsquo;ordre d&rsquo;exécution des instructions n&rsquo;est plus prédéfini, mais dépend des actions de l&rsquo;utilisateur.</p></section><section><h3 id=exemple-de-gestionnaire-dévènement>Exemple de gestionnaire d&rsquo;évènement</h3><p>L&rsquo;évènement intercepté est passé en paramètre de la fonction gestionnaire sous la forme d&rsquo;un objet souvent nommé <code>e</code>.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#fb660a;font-weight:700>button</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;myButton&#34;</span>&gt;Cliquez-moi !&lt;/<span style=color:#fb660a;font-weight:700>button</span>&gt;
</code></pre></div><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> showMessage = (e) =&gt; {
  console.log(<span style=color:#0086d2>`Type d&#39;évènement : </span><span style=color:#0086d2>${</span>e.type<span style=color:#0086d2>}</span><span style=color:#0086d2>, cible: </span><span style=color:#0086d2>${</span>e.target<span style=color:#0086d2>}</span><span style=color:#0086d2>`</span>);
  <span style=color:#080;background-color:#0f140f;font-style:italic>// Affiche une pop-up
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  alert(<span style=color:#0086d2>&#34;Hello!&#34;</span>);
};

<span style=color:#080;background-color:#0f140f;font-style:italic>// Accès au bouton
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span><span style=color:#fb660a;font-weight:700>const</span> buttonElement = document.getElementById(<span style=color:#0086d2>&#34;myButton&#34;</span>);
<span style=color:#080;background-color:#0f140f;font-style:italic>// Gestion du clic via la fonction showMessage()
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>buttonElement.addEventListener(<span style=color:#0086d2>&#34;click&#34;</span>, showMessage);
</code></pre></div></section><section><h3 id=evènements-utilisables>Evènements utilisables</h3><p>JavaScript permet d&rsquo;exploiter de nombreux évènements sur la page : <code>click</code>, <code>keypress</code>, <code>mousedown</code>, <code>load</code>, etc.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.addEventListener(<span style=color:#0086d2>&#34;keypress&#34;</span>, (e) =&gt; {
  console.log(
    <span style=color:#0086d2>`Vous avez appuyé sur la touche </span><span style=color:#0086d2>${</span>String.fromCharCode(e.charCode)<span style=color:#0086d2>}</span><span style=color:#0086d2>`</span>
  );
});

<span style=color:#080;background-color:#0f140f;font-style:italic>// &#34;window&#34; représente la fenêtre du navigateur affichant la page
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>window.addEventListener(<span style=color:#0086d2>&#34;load&#34;</span>, (e) =&gt; {
  console.log(<span style=color:#0086d2>&#34;Page web chargée !&#34;</span>);
});

<span style=color:#080;background-color:#0f140f;font-style:italic>// Affiche un message de confirmation de fermeture
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>window.addEventListener(<span style=color:#0086d2>&#34;beforeunload&#34;</span>, (e) =&gt; {
  <span style=color:#fb660a;font-weight:700>const</span> message = <span style=color:#0086d2>&#34;Voulez-vous vraiment quitter ?&#34;</span>;
  e.returnValue = message;
  <span style=color:#fb660a;font-weight:700>return</span> message;
});
</code></pre></div></section><section><h3 id=propagation-des-évènements>Propagation des évènements</h3><p>Un évènement qui apparaît au niveau d&rsquo;un noeud se propage vers ses noeuds parents, jusqu&rsquo;à arriver à la racine du DOM.</p><p>Appelée sur un objet évènement, la méthode <code>stopPropagation()</code> permet d&rsquo;interrompre sa propagation.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;propa&#34;</span>).addEventListener(<span style=color:#0086d2>&#34;click&#34;</span>, (e) =&gt; {
  <span style=color:#080;background-color:#0f140f;font-style:italic>// ...
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  <span style=color:#080;background-color:#0f140f;font-style:italic>// Interrompt la propagation de cet évènement
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  e.stopPropagation();
});
</code></pre></div></section><section><h3 id=comportement-par-défaut>Comportement par défaut</h3><p>De nombreux évènements déclenchent des comportements par défaut : clic sur un lien web, clic droit sur la page, etc. Appelée sur un objet évènement, la méthode <code>preventDefault()</code> annule ce comportement.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;
  Du temps à perdre ? &lt;<span style=color:#fb660a;font-weight:700>a</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;forbidden&#34;</span> <span style=color:#ff0086;font-weight:700>href</span>=<span style=color:#0086d2>&#34;https://9gag.com/&#34;</span>&gt;cliquez ici&lt;/<span style=color:#fb660a;font-weight:700>a</span>&gt;
&lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;
</code></pre></div><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;forbidden&#34;</span>).addEventListener(<span style=color:#0086d2>&#34;click&#34;</span>, (e) =&gt; {
  alert(<span style=color:#0086d2>&#34;Pas une bonne idée&#34;</span>);
  <span style=color:#080;background-color:#0f140f;font-style:italic>// Annule l&#39;ouverture du lien
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  e.preventDefault();
});
</code></pre></div></section><section><h2 id=manipulation-des-formulaires>Manipulation des formulaires</h2></section><section><h3 id=exemple-de-formulaire>Exemple de formulaire</h3><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#fb660a;font-weight:700>form</span>&gt;
  &lt;<span style=color:#fb660a;font-weight:700>h1</span>&gt;Formulaire d&#39;inscription&lt;/<span style=color:#fb660a;font-weight:700>h1</span>&gt;
  &lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>label</span> <span style=color:#ff0086;font-weight:700>for</span>=<span style=color:#0086d2>&#34;username&#34;</span>&gt;Nom d&#39;utilisateur&lt;/<span style=color:#fb660a;font-weight:700>label</span>&gt;:
    &lt;<span style=color:#fb660a;font-weight:700>input</span> <span style=color:#ff0086;font-weight:700>type</span>=<span style=color:#0086d2>&#34;text&#34;</span> <span style=color:#ff0086;font-weight:700>name</span>=<span style=color:#0086d2>&#34;username&#34;</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;username&#34;</span> <span style=color:#ff0086;font-weight:700>required</span> /&gt;
    &lt;<span style=color:#fb660a;font-weight:700>span</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;usernameHelp&#34;</span>&gt;&lt;/<span style=color:#fb660a;font-weight:700>span</span>&gt;
  &lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;
  &lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>label</span> <span style=color:#ff0086;font-weight:700>for</span>=<span style=color:#0086d2>&#34;password&#34;</span>&gt;Mot de passe&lt;/<span style=color:#fb660a;font-weight:700>label</span>&gt;:
    &lt;<span style=color:#fb660a;font-weight:700>input</span> <span style=color:#ff0086;font-weight:700>type</span>=<span style=color:#0086d2>&#34;password&#34;</span> <span style=color:#ff0086;font-weight:700>name</span>=<span style=color:#0086d2>&#34;password&#34;</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;password&#34;</span> <span style=color:#ff0086;font-weight:700>required</span> /&gt;
    &lt;<span style=color:#fb660a;font-weight:700>span</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;passwordHelp&#34;</span>&gt;&lt;/<span style=color:#fb660a;font-weight:700>span</span>&gt;
  &lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;
  &lt;<span style=color:#fb660a;font-weight:700>p</span>&gt;
    &lt;<span style=color:#fb660a;font-weight:700>label</span> <span style=color:#ff0086;font-weight:700>for</span>=<span style=color:#0086d2>&#34;nationality&#34;</span>&gt;Nationalité&lt;/<span style=color:#fb660a;font-weight:700>label</span>&gt;:
    &lt;<span style=color:#fb660a;font-weight:700>select</span> <span style=color:#ff0086;font-weight:700>name</span>=<span style=color:#0086d2>&#34;nationality&#34;</span> <span style=color:#ff0086;font-weight:700>id</span>=<span style=color:#0086d2>&#34;nationality&#34;</span>&gt;
      &lt;<span style=color:#fb660a;font-weight:700>option</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;US&#34;</span> <span style=color:#ff0086;font-weight:700>selected</span>&gt;Américaine&lt;/<span style=color:#fb660a;font-weight:700>option</span>&gt;
      &lt;<span style=color:#fb660a;font-weight:700>option</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;FR&#34;</span>&gt;Française&lt;/<span style=color:#fb660a;font-weight:700>option</span>&gt;
      &lt;<span style=color:#fb660a;font-weight:700>option</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;ES&#34;</span>&gt;Espagnole&lt;/<span style=color:#fb660a;font-weight:700>option</span>&gt;
      &lt;<span style=color:#fb660a;font-weight:700>option</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;XX&#34;</span>&gt;Autre&lt;/<span style=color:#fb660a;font-weight:700>option</span>&gt;
    &lt;/<span style=color:#fb660a;font-weight:700>select</span>&gt;
  &lt;/<span style=color:#fb660a;font-weight:700>p</span>&gt;

  &lt;<span style=color:#fb660a;font-weight:700>input</span> <span style=color:#ff0086;font-weight:700>type</span>=<span style=color:#0086d2>&#34;submit&#34;</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;Envoyer&#34;</span> /&gt;
  &lt;<span style=color:#fb660a;font-weight:700>input</span> <span style=color:#ff0086;font-weight:700>type</span>=<span style=color:#0086d2>&#34;reset&#34;</span> <span style=color:#ff0086;font-weight:700>value</span>=<span style=color:#0086d2>&#34;Annuler&#34;</span> /&gt;
&lt;/<span style=color:#fb660a;font-weight:700>form</span>&gt;
</code></pre></div></section><section><h3 id=gestion-du-focus>Gestion du focus</h3><p>Les évènements <code>focus</code> et <code>blur</code> permettent d&rsquo;ajouter du comportement lorsqu&rsquo;un champ du formulaire reçoit ou perd le focus.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#fb660a;font-weight:700>const</span> usernameElement = document.getElementById(<span style=color:#0086d2>&#34;username&#34;</span>);

<span style=color:#080;background-color:#0f140f;font-style:italic>// Ajoute le texte d&#39;aide quand le champ reçoit le focus
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>usernameElement.addEventListener(<span style=color:#0086d2>&#34;focus&#34;</span>, (e) =&gt; {
  document.getElementById(<span style=color:#0086d2>&#34;usernameHelp&#34;</span>).textContent =
    <span style=color:#0086d2>&#34;Ajoutez votre nom d&#39;utilisateur&#34;</span>;
});
<span style=color:#080;background-color:#0f140f;font-style:italic>// Vide la zone d&#39;aide quand le champ perd le focus
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>usernameElement.addEventListener(<span style=color:#0086d2>&#34;blur&#34;</span>, (e) =&gt; {
  document.getElementById(<span style=color:#0086d2>&#34;usernameHelp&#34;</span>).textContent = <span style=color:#0086d2>&#34;&#34;</span>;
});
</code></pre></div></section><section><h3 id=choix-dans-une-liste-déroulante>Choix dans une liste déroulante</h3><p>L&rsquo;évènement <code>change</code> sur une liste déroulante permet de gérer le changement de sélection par l&rsquo;utilisateur.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.getElementById(<span style=color:#0086d2>&#34;nationality&#34;</span>).addEventListener(<span style=color:#0086d2>&#34;change&#34;</span>, (e) =&gt; {
  console.log(<span style=color:#0086d2>&#34;Code de nationalité : &#34;</span> + e.target.value);
});
</code></pre></div><p>Les boutions radio et les cases à cocher fonctionnent sur le même principe.</p></section><section><h3 id=validation-pendant-la-saisie>Validation pendant la saisie</h3><p>L&rsquo;évènement <code>input</code> permet de déclencher l&rsquo;exécution de code à chaque modification du texte saisi dans un champ.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#080;background-color:#0f140f;font-style:italic>// Affiche un texte d&#39;aide qui dépend de la longueur du mot de passe saisi
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>document.getElementById(<span style=color:#0086d2>&#34;password&#34;</span>).addEventListener(<span style=color:#0086d2>&#34;input&#34;</span>, (e) =&gt; {
  <span style=color:#fb660a;font-weight:700>const</span> password = e.target.value; <span style=color:#080;background-color:#0f140f;font-style:italic>// Texte saisi dans le champ
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  <span style=color:#fb660a;font-weight:700>let</span> helpText = <span style=color:#0086d2>&#34;Trop court&#34;</span>;
  <span style=color:#fb660a;font-weight:700>let</span> messageColor = <span style=color:#0086d2>&#34;red&#34;</span>;
  <span style=color:#fb660a;font-weight:700>if</span> (password.length &gt;= <span style=color:#0086f7;font-weight:700>8</span>) {
    helpText = <span style=color:#0086d2>&#34;OK&#34;</span>;
    messageColor = <span style=color:#0086d2>&#34;green&#34;</span>;
  }
  <span style=color:#fb660a;font-weight:700>const</span> passwordHelpElement = document.getElementById(<span style=color:#0086d2>&#34;passwordHelp&#34;</span>);
  passwordHelpElement.textContent = helpText;
  passwordHelpElement.style.color = messageColor;
});
</code></pre></div></section><section><h3 id=validation-après-soumission>Validation après soumission</h3><p>Le noeud correspond à un formulaire dispose d&rsquo;une propriété <code>elements</code> qui permet d&rsquo;accéder aux champs par leur nom.</p><p>La gestion de l&rsquo;évènement <code>submit</code> permet de réagir à la soumission du formulaire par l&rsquo;utilisateur.</p><div class=highlight><pre style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>document.querySelector(<span style=color:#0086d2>&#34;form&#34;</span>).addEventListener(<span style=color:#0086d2>&#34;submit&#34;</span>, (e) =&gt; {
  e.preventDefault(); <span style=color:#080;background-color:#0f140f;font-style:italic>// Annule l&#39;envoi du formulaire au serveur web
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>
  <span style=color:#080;background-color:#0f140f;font-style:italic>// Récupération des informations saisies par l&#39;utilisateur
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>  <span style=color:#fb660a;font-weight:700>const</span> username = e.target.elements.username.value;
  <span style=color:#fb660a;font-weight:700>const</span> password = e.target.elements.password.value;
  <span style=color:#fb660a;font-weight:700>const</span> nationalityCode = e.target.elements.nationality.value;
  <span style=color:#080;background-color:#0f140f;font-style:italic>// ... (Vérification éventuelles)
</span><span style=color:#080;background-color:#0f140f;font-style:italic></span>});
</code></pre></div></section></div></div><div><a href=https://ensc.bordeaux-inp.fr><img src=https://www.bpesquet.fr/images/ENSC.jpg style=position:absolute;bottom:10px;left:10px></a></div><script src=https://www.bpesquet.fr/reveal.js/dist/reveal.js></script><script src=https://www.bpesquet.fr/reveal.js/plugin/math/math.js></script><script>Reveal.initialize({history:false,slideNumber:true,transition:"convex",math:{mathjax:'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',config:'TeX-MML-AM_HTMLorMML'},dependencies:[{src:'https:\/\/www.bpesquet.fr\/reveal.js\/plugin\/markdown\/marked.js'},{src:'https:\/\/www.bpesquet.fr\/reveal.js\/plugin\/markdown\/markdown.js'},{src:'https:\/\/www.bpesquet.fr\/reveal.js\/plugin\/notes\/notes.js',async:true},{src:'https:\/\/www.bpesquet.fr\/reveal.js\/plugin\/zoom-js\/zoom.js',async:true},{src:'https:\/\/www.bpesquet.fr\/reveal.js\/plugin\/highlight\/highlight.js',async:true,callback:function(){hljs.initHighlightingOnLoad();}},],plugins:[RevealMath]});</script></body></html>