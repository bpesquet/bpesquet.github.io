<!doctype html><html lang=en data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>My M1 Mac setup for Python development - Baptiste Pesquet</title><meta name=description content><link rel=icon type=image/x-icon href=https://www.bpesquet.fr/favicon.ico><link rel=apple-touch-icon-precomposed href=https://www.bpesquet.fr/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://www.bpesquet.fr/css/style.min.ecd6d68ec75f136aa2ef44e76818d4e46cf4ee45f39dae3684c8b4232785015c.css integrity="sha256-7NbWjsdfE2qi70TnaBjU5Gz07kXzna42hMi0IyeFAVw="><script src=https://www.bpesquet.fr/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="My M1 Mac setup for Python development"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://www.bpesquet.fr/posts/my-mac-setup-for-python/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-14T12:15:28+02:00"><meta property="article:modified_time" content="2023-09-02T11:01:56+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="My M1 Mac setup for Python development"><meta name=twitter:description content><script async src="https://www.googletagmanager.com/gtag/js?id=G-4DNVMNCRYK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4DNVMNCRYK",{anonymize_ip:!1})}</script></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><div class=header-top-left><h1 class=site-title><a href=/>Baptiste Pesquet</a></h1><ul class=social-icons><li><a href="mailto:bpesquet [at] gmail [dot] com" title=Email rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></span></a></li><li><a href=https://github.com/bpesquet title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href="https://scholar.google.fr/citations?hl=fr&amp;user=0KJ7JkMAAAAJ" title="Google scholar" rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M390.9 298.5s0 .1.1.1c9.2 19.4 14.4 41.1 14.4 64C405.3 445.1 338.5 512 256 512s-149.3-66.9-149.3-149.3c0-22.9 5.2-44.6 14.4-64h0c1.7-3.6 3.6-7.2 5.6-10.7 4.4-7.6 9.4-14.7 15-21.3 27.4-32.6 68.5-53.3 114.4-53.3 33.6.0 64.6 11.1 89.6 29.9 9.1 6.9 17.4 14.7 24.8 23.5 5.6 6.6 10.6 13.8 15 21.3 2 3.4 3.8 7 5.5 10.5zm26.4-18.8c-30.1-58.4-91-98.4-161.3-98.4s-131.2 40-161.3 98.4L0 202.7 256 0 512 202.7l-94.7 77.1z"/></svg></span></a></li><li><a href=https://www.linkedin.com/in/bpesquet title=Linkedin rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M100.3 448H7.4V148.9h92.9zM53.8 108.1C24.1 108.1.0 83.5.0 53.8a53.8 53.8.0 01107.6.0c0 29.7-24.1 54.3-53.8 54.3zM447.9 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3.0-55.7 37.7-55.7 76.7V448h-92.8V148.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V448z"/></svg></span></a></li><li><a href=https://bsky.app/profile/bpesquet.bsky.social title=Bluesky rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M123.6 34.5C190 84.6 261.5 186 287.8 240.5 314 186 385.5 84.5 452 34.5c48-36.1 125.6-64.1 125.6 24.9.0 17.8-10.1 149.2-16.1 170.5-20.7 74.2-96.1 93.1-163.1 81.6 117.2 20 147 86.3 82.6 152.6-122.3 125.9-175.8-31.6-189.5-72-2.5-7.5-3.7-10.9-3.7-7.9.0-3.1-1.2.4-3.7 7.9-13.7 40.4-67.2 197.9-189.5 72C30.2 397.8 60 331.5 177.2 311.5c-67 11.4-142.4-7.5-163.1-81.7C8.1 208.5-2 77.1-2 59.3c0-88.9 77.7-61 125.6-24.9z"/></svg></span></a></li><li><a href=https://www.youtube.com/c/../@bpesquet title=Youtube rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></a></li></ul></div><div class=header-top-right><div class=theme-switcher><span class=inline-svg><svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 290 290"><path fill="currentcolor" d="M142.959.0C64.131.0.0 64.132.0 142.96s64.131 142.959 142.959 142.959 142.96-64.131 142.96-142.959C285.919 64.132 221.787.0 142.959.0zm0 260.919V142.96 25c65.043.0 117.96 52.917 117.96 117.96.0 65.043-52.917 117.959-117.96 117.959z"/></svg></span></div><script>const STORAGE_KEY="user-color-scheme",defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme)};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&switchButton.addEventListener("click",switchTheme,!1),showContent()});function detectCurrentScheme(){return localStorage!==null&&localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function switchTheme(){currentTheme=="dark"?(localStorage!==null&&localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage!==null&&localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark")}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></div></div><nav><a href=https://www.bpesquet.fr/bio/ title="Short bio">Short bio</a>
<a href=https://www.bpesquet.fr/teaching/ title=Teaching>Teaching</a>
<a href=https://www.bpesquet.fr/research/ title=Research>Research</a>
<a class=active href=https://www.bpesquet.fr/posts/ title=Posts>Blog</a></nav><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">My M1 Mac setup for Python development</h1></header></div><nav id=TableOfContents><ul><li><a href=#general-package-management>General package management</a></li><li><a href=#python-interpreter>Python interpreter</a></li><li><a href=#dependency-management>Dependency management</a></li><li><a href=#code-utilities>Code utilities</a></li><li><a href=#jupyter-notebook>Jupyter notebook</a></li><li><a href=#deep-learning>Deep Learning</a></li><li><a href=#closing-thoughts>Closing thoughts</a></li></ul></nav><div class="content e-content"><p>I recently got my lucky hands on a brand new M1 MacBook Pro as my new work machine. As an <a href=https://www.bpesquet.fr/teaching/>teacher</a>, I maintain several pedagogical resources written in Python and thus needed to quickly set up an efficient work environment on this machine.</p><p>For all its qualities as a language, Python is notoriously hard to configure in a robust and efficient way. Along the years, many tools have been created to handle interpreter versions, virtual environments, project dependencies and the many chores associated with Python development. This is an ever evolving field, and the solutions listed below might very well become obsolete rather soon.</p><p><a href=https://xkcd.com/1987/><img src=images/python_environment.png alt="There&rsquo;s an xkcd for that, too!"></a></p><p>This post is a chronological overview of the choices I made to create a functional Python development environment on an M1/M2 Mac. Useful external resources are linked as references for further research.</p><h2 id=general-package-management>General package management
<span><a href=#general-package-management><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p><a href=https://brew.sh>Homebrew</a> is the go-to solution for downloading and managing various tools on macOS, so I started by installing it.</p><h2 id=python-interpreter>Python interpreter
<span><a href=#python-interpreter><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>The version of macOS installed on my MacBook Pro was Monterey. Out of the box, it comes with python (2.7.18) and python3 (3.8.9) interpreters available in the <code>/usr/bin</code> folder. However, Python is evolving quickly and it&rsquo;s great to be able to use specific versions for different projects.</p><p><a href=https://github.com/pyenv/pyenv>pyenv</a> is a tool that lets you easily switch between multiple versions of Python. I installed it via brew, then downloaded the most up-to-date Python version (3.10.6 for me) and made it the default global Python interpreter.</p><p><strong>References</strong>:</p><ul><li><a href=https://nedbatchelder.com/text/which-py.html>https://nedbatchelder.com/text/which-py.html</a></li></ul><h2 id=dependency-management>Dependency management
<span><a href=#dependency-management><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>The overall richness of its open source ecosystem means that any non-trivial Python project depends on a number of external libraries. Moreover, different versions of the same tool might be needed by specific projects, creating potential conflicts and instabilities.</p><p>The standard solution is to use virtual environments to isolate projects and their dependencies in sandboxed contexts. The <a href=https://docs.python.org/3/library/venv.html>venv</a> package is one of the available solutions to this problem. It is leveraged by the tool I chose to use for project dependency management: <a href=https://python-poetry.org/>poetry</a>.</p><p>After installing poetry via <a href=https://curl.se/>curl</a>, I configured it to store the virtual environment in the project&rsquo;s folder (or more precisely, in a folder named <code>.venv/</code> within the root directory of the project).</p><p>All my Python projects are managed through poetry with a dedicated, locally-stored virtual environment for each of them.</p><p>References:</p><ul><li><a href=https://stackoverflow.com/a/62071321/2380880>https://stackoverflow.com/a/62071321/2380880</a></li></ul><h2 id=code-utilities>Code utilities
<span><a href=#code-utilities><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Development tools like code formatters and linters are typically reused from project to project. It is thefore a good practice to install them globally rather than duplicating them in each project.</p><p>In order to avoid polluting the global Python directories, I used <a href=https://github.com/pypa/pipx>pipx</a> which installs command line tools in dedicated virtual environments.</p><p>Initially, I wanted to install <a href=https://github.com/psf/black>black</a> and <a href=https://github.com/PyCQA/pylint>pylint</a> this way. However, the latter didn&rsquo;t play nice with Visual Studio Code (my code editor of choice) when installed elsewhere than in the project&rsquo;s own virtual environment. Thus, only black was installed system-wide through pipx. On the contrary, pylint is added to each project&rsquo;s virtual environment as a development dependency.</p><p>In addition, here are the VS Code settings (<code>.vscode/settings.json</code>) I use for configuring black and pylint in a project.</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#fb660a;font-weight:700>&#34;python.formatting.provider&#34;</span>: <span style=color:#0086d2>&#34;black&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#fb660a;font-weight:700>&#34;python.formatting.blackPath&#34;</span>: <span style=color:#0086d2>&#34;~/.local/bin/black&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#fb660a;font-weight:700>&#34;python.linting.pylintEnabled&#34;</span>: <span style=color:#fb660a;font-weight:700>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#fb660a;font-weight:700>&#34;python.linting.enabled&#34;</span>: <span style=color:#fb660a;font-weight:700>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>References</strong>:</p><ul><li><a href=https://code.visualstudio.com/docs/python/editing#_formatting>https://code.visualstudio.com/docs/python/editing#_formatting</a></li><li><a href=https://code.visualstudio.com/docs/python/linting>https://code.visualstudio.com/docs/python/linting</a></li><li><a href=https://www.twoistoomany.com/blog/2020/11/24/how-i-work-pipx/>https://www.twoistoomany.com/blog/2020/11/24/how-i-work-pipx/</a></li><li><a href=https://stackoverflow.com/q/70488092/2380880>https://stackoverflow.com/q/70488092/2380880</a></li></ul><h2 id=jupyter-notebook>Jupyter notebook
<span><a href=#jupyter-notebook><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>My workflow includes working with <a href=https://github.com/jupyter/notebook>Jupyter notebooks</a>, either through a web browser or Visual Studio Code. In particular, I use the <a href=https://rise.readthedocs.io>RISE</a> extension to showcase notebooks as slides when teaching.</p><p>After struggling for a while, I gave up on trying to install the Jupyter ecosystem globally while making it available in Visual Studio Code, which uses the local virtual environment of the project. Instead, I use poetry to add jupyter as a dependency for all notebook-based projects. I also add RISE as a developement dependency for projects needing slideshows.</p><p><strong>References</strong>:</p><ul><li><a href=https://code.visualstudio.com/docs/datascience/jupyter-notebooks>https://code.visualstudio.com/docs/datascience/jupyter-notebooks</a></li><li><a href=https://hippocampus-garden.com/jupyter_poetry_pipenv/>https://hippocampus-garden.com/jupyter_poetry_pipenv/</a></li><li><a href=https://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments>https://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments</a></li></ul><h2 id=deep-learning>Deep Learning
<span><a href=#deep-learning><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>As the icing on the cake, I obviously wanted to leverage the power of the M1 architecture in my Deep Learning projects. Fortunately, both <a href=https://pytorch.org/>PyTorch</a> and <a href=https://www.tensorflow.org/>TensorFlow</a> now support the M1 family of processors, so the installation process is straighforward: I simply added <code>torch</code> (for PyTorch) or <code>tensorflow-macos</code> and <code>tensorflow-metal</code> (for TF) as project dependencies.</p><p>The following code subsequently checks if a CUDA (NVIDIA) or Metal (Apple ARM) GPU is available for PyTorch and for TensorFlow. The M1 GPU should be successfully detected in both cases.</p><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#fb660a;font-weight:700>import</span> torch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># Device configuration</span>
</span></span><span style=display:flex><span><span style=color:#fb660a;font-weight:700>if</span> torch.cuda.is_available():
</span></span><span style=display:flex><span>    device = torch.device(<span style=color:#0086d2>&#34;cuda&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#0086d2>f</span><span style=color:#0086d2>&#34;CUDA GPU </span><span style=color:#0086d2>{</span>torch.cuda.get_device_name(<span style=color:#0086f7;font-weight:700>0</span>)<span style=color:#0086d2>}</span><span style=color:#0086d2> found :)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#fb660a;font-weight:700>elif</span> torch.backends.mps.is_available():
</span></span><span style=display:flex><span>    device = torch.device(<span style=color:#0086d2>&#34;mps&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#0086d2>&#34;Metal GPU found :)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#fb660a;font-weight:700>else</span>:
</span></span><span style=display:flex><span>    device = torch.device(<span style=color:#0086d2>&#34;cpu&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#0086d2>&#34;No available GPU :/&#34;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#fb660a;font-weight:700>import</span> tensorflow <span style=color:#fb660a;font-weight:700>as</span> tf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#080;background-color:#0f140f;font-style:italic># Device configuration</span>
</span></span><span style=display:flex><span><span style=color:#fb660a;font-weight:700>if</span> len(tf.config.list_physical_devices(<span style=color:#0086d2>&#34;GPU&#34;</span>)) &gt; <span style=color:#0086f7;font-weight:700>0</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#0086d2>&#34;GPU found :)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#fb660a;font-weight:700>else</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#0086d2>&#34;No available GPU :/&#34;</span>)
</span></span></code></pre></div><p><strong>References</strong>:</p><ul><li><a href=https://pytorch.org/blog/introducing-accelerated-pytorch-training-on-mac/>https://pytorch.org/blog/introducing-accelerated-pytorch-training-on-mac/</a></li><li><a href=https://stackoverflow.com/a/72401340>https://stackoverflow.com/a/72401340</a></li><li><a href=https://pytorch.org/docs/master/notes/mps.html>https://pytorch.org/docs/master/notes/mps.html</a></li><li><a href=https://developer.apple.com/metal/tensorflow-plugin/>https://developer.apple.com/metal/tensorflow-plugin/</a></li></ul><h2 id=closing-thoughts>Closing thoughts
<span><a href=#closing-thoughts><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>This is of course an imperfect work in progress, and things might change in the future. Meanwhile, I&rsquo;m pretty happy with the current result.</p><p>I hope some of this has been useful to you. Happy Python setup ;)</p><p><strong>References</strong>:</p><ul><li><a href=https://blog.jayway.com/2019/12/28/pyenv-poetry-saviours-in-the-python-chaos/>https://blog.jayway.com/2019/12/28/pyenv-poetry-saviours-in-the-python-chaos/</a></li><li><a href=https://drgabrielharris.medium.com/python-how-farewell-anaconda-take-full-control-of-your-development-environment-6c4f8103980f>https://drgabrielharris.medium.com/python-how-farewell-anaconda-take-full-control-of-your-development-environment-6c4f8103980f</a></li><li><a href=https://www.ethanrosenthal.com/2022/02/01/everything-gets-a-package/>https://www.ethanrosenthal.com/2022/02/01/everything-gets-a-package/</a></li><li><a href="https://news.ycombinator.com/item?id=25650140">https://news.ycombinator.com/item?id=25650140</a></li><li><a href="https://news.ycombinator.com/item?id=25647034">https://news.ycombinator.com/item?id=25647034</a></li></ul></div><div class=post-info><div class="post-date dt-published"><a class=u-url href=/posts/my-mac-setup-for-python/><time datetime=2022-09-14>September 14, 2022</time></a>
[Last modified: <time datetime=2023-09-02>September 2, 2023</time>]</div><a class="post-hidden-url u-url" href=https://www.bpesquet.fr/posts/my-mac-setup-for-python/>https://www.bpesquet.fr/posts/my-mac-setup-for-python/</a>
<a href=https://www.bpesquet.fr class="p-name p-author post-hidden-author h-card" rel=me>Baptiste Pesquet</a><div class=post-taxonomies><ul class=post-tags><li><a href=https://www.bpesquet.fr/tags/python/>#python</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item disabled"></div><div class="right pagination-item"><a href=/posts/mon-premier-kahoot/>Mon premier Kahoot</a></div></div></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>Â© Baptiste Pesquet, 2024<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div></div><p class="h-card vcard"><a href=https://www.bpesquet.fr class="p-name u-url url fn" rel=me>Baptiste Pesquet</a>
/
<a class="p-email u-email email" rel=me href=mailto:bpesquet%20[at]%20gmail%20[dot]%20com>bpesquet [at] gmail [dot] com</a></p></footer></div></body></html>